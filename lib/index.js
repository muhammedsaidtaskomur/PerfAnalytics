'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.perfAnalytics=void 0;var _stringify=require('babel-runtime/core-js/json/stringify'),_stringify2=_interopRequireDefault(_stringify);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var W=window,WP=window.performance,measureTTFB=function(){return Math.round(WP.timing.responseStart-WP.timing.requestStart)},measureFCP=function(){var a=Math.round,b=WP.getEntriesByType('paint').find(function(a){return'first-contentful-paint'===a.name});return b?a(b.startTime):0},measureDOMLoad=function(){return Math.round(WP.timing.domContentLoadedEventEnd-WP.timing.navigationStart)},measureWindowLoad=function(){return Math.round(WP.timing.loadEventStart-WP.timing.navigationStart)},measureResourcesLoad=function(){var a=WP.getEntriesByType('resource').reduce(function(a,b){return a+(b.responseEnd-b.startTime)},0);return Math.round(a)},sendData=function(a,b){fetch(a,{method:'POST',headers:{"Content-Type":'application/json'},body:(0,_stringify2.default)(b),keepalive:!0})},perfAnalytics=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=a.TTFB,c=a.FCP,d=a.domLoad,e=a.windowLoad,f=a.resourceLoad,g=a.url,h=g===void 0?'http://localhost:4000/analytics':g;return{run:function a(){W.onload=function(){var a=void 0,g=void 0,i=void 0,j=void 0,k=void 0;(!(e!==void 0)||e)&&(j=measureWindowLoad()),(!(b!==void 0)||b)&&(g=measureTTFB()),(!(d!==void 0)||d)&&(i=measureDOMLoad()),(!(c!==void 0)||c)&&(a=measureFCP()),(!(f!==void 0)||f)&&(k=measureResourcesLoad()),sendData(h,{FCPTime:a,TTFBTime:g,domLoadTime:i,windowLoadTime:j,resourceLoadTime:k})}}}};exports.default=perfAnalytics,exports.perfAnalytics=perfAnalytics;